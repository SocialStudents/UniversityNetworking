<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

    <ui:composition template="../layout/adminReportLayout.xhtml">
        <ui:define name="content">
             <script type="text/javascript">
                if("#{userRightsDataBean.haveUserReportsRights}" == "false") {                          
                    location.href ="#{loginDataBean.lendingPage}";
                } 
            </script>
            <f:metadata>
                <f:event listener="#{userServiceBean.retrieveMesurementForReport()}" type="preRenderView"/>
            </f:metadata>
            <div id="content">
                <h:form prependId="false">
                    <table class="form-table" border="0" id="selectionTable">
                        <tr>
                            <td width="95%">    
                                <h:outputLabel>
                                    <font color="#C11B1D" style="font-size: 15px;font-weight: bold;">Measurement Detail - #{systemResultSessionUtil.name}</font>
                                </h:outputLabel>
                            </td>
                            <td width="5%">
                                <a4j:commandLink style="color: blue; font-style: italic; text-decoration: underline;" action="#{userServiceBean.navigateToMembershipDueReportDetail()}">
                                    <img src="#{facesContext.externalContext.requestContextPath}/images/back-btn.png"/>
                                    <f:setPropertyActionListener target="#{systemResultSessionUtil.prevView}" value="membershipDueReportDetail?faces-redirect=true" />
                                </a4j:commandLink>
                            </td>
                        </tr>
                    </table>
                       <a4j:outputPanel id="downloadLink" >
                          <h:commandLink action="#{reportToPdfServiceBean.measurementiReport()}" rendered="#{systemResultViewUtil.measurementDetailList !=null and not empty systemResultViewUtil.measurementDetailList}">
                                <h:graphicImage value="/images/download-pdf.jpg" style="border: none; float: right" title="Click to Download Report"/>
                                &nbsp;&nbsp;&nbsp;
                            </h:commandLink>
                            <br></br>
                        </a4j:outputPanel>
                    <table class="form-table" cellpadding="0" cellspacing="0" border="0" width="100%">
                        <tr>
                            <th class="header" width="11%">
                                Date
                            </th>
                            <th class="header" width="7%">
                                BF%
                            </th>
                            <th class="header" width="5%">
                                Wt.
                            </th>
                            <th class="header" colspan="5" style="text-align: center">
                                Tape (inches)
                            </th>
                            <th class="header" colspan="5" style="text-align: center">
                                Calipers (mm)
                            </th>
                        </tr>
                        <tr>
                            <th class="header" colspan="3">
                            </th>
                            <th class="header" width="8%">
                                Arm
                            </th>
                            <th class="header" width="8%">
                                Waist
                            </th>
                            <th class="header" width="8%">
                                Hip
                            </th>
                            <th class="header" width="8%">
                                Thigh
                            </th>
                            <th class="header" width="8%">
                                Calf
                            </th>
                            <th class="header" width="8%">
                                Bis
                            </th>
                            <th class="header" width="8%">
                                Tris
                            </th>
                            <th class="header" width="8%">
                                Hip
                            </th>
                            <th class="header" width="8%">
                                Back
                            </th>
                            <th class="header" width="8%">
                                Total
                            </th>
                        </tr>
                    </table>   
                   
                    <rich:dataTable id="measurementList" value="#{systemResultViewUtil.measurementDetailList}" var="measurementData" style="border: none; width: 100%" rowKeyVar="rowId">
                        <rich:column>
                            <table class="form-table" cellpadding="0" cellspacing="0" border="0" width="100%">                                        
                                <tr>
                                    <td width="11%">
                                        <h:outputLabel value="#{measurementData.onDate}">
                                            <f:convertDateTime pattern="MM/dd/yyyy" type="date" />
                                        </h:outputLabel>
                                    </td>
                                    <td width="7%">
                                        <h:outputText value="N/A" rendered="#{measurementData.totalBf == null}"/>
                                        <h:outputText value="#{measurementData.totalBf}" rendered="#{measurementData.totalBf != null}"/>              
                                    </td>
                                    <td width="5%">
                                        #{measurementData.weight}
                                    </td>
                                    <td width="8%">
                                        #{measurementData.tapeArm}
                                    </td>
                                    <td width="8%">
                                        #{measurementData.tapeWaist}
                                    </td>
                                    <td width="8%">
                                        #{measurementData.tapeHip}
                                    </td>
                                    <td width="8%">
                                        #{measurementData.tapeThigh}
                                    </td>
                                    <td width="8%">
                                        #{measurementData.tapeCalf}
                                    </td>
                                    <td width="8%">
                                        #{measurementData.callipersBiceps}
                                    </td>
                                    <td width="8%">
                                        #{measurementData.callipersTriceps}
                                    </td>
                                    <td width="8%">
                                        #{measurementData.callipersHip}
                                    </td>
                                    <td width="8%">
                                        #{measurementData.callipersBack}
                                    </td>
                                    <td width="8%">
                                        #{measurementData.total}
                                    </td>
                                </tr>
                            </table>
                        </rich:column>
                    </rich:dataTable>
                </h:form>
            </div>
            <script type="text/javascript">
                document.getElementById("membershipDueReport").setAttribute("class", "active");
            </script>
        </ui:define>
    </ui:composition>
</html>


