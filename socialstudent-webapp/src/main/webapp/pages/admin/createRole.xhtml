<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

    <body>
        <ui:composition template="./../layout/homeLayout.xhtml">
            <ui:define name="content">
                <f:metadata>
                    <f:event type="preRenderView" listener="#{roleServiceBean.isFeaturesExists()}"/>
                </f:metadata>
                <div id="content">
                    <h3>#{msg.AddRole}</h3>
                    <hr class="red"/>
                    <h:form prependId="false">
                        <a4j:outputPanel id="dataMessage">
                            <h:outputLabel rendered="#{messageDataBean.isSuccess and messageDataBean.message != null}" >
                                <div class="succmsg"><ul><li>#{messageDataBean.message}</li></ul></div>
                            </h:outputLabel>
                            <h:outputLabel rendered="#{not messageDataBean.isSuccess and messageDataBean.message != null}">
                                <div class="errmsg"><ul><li>#{messageDataBean.message}</li></ul></div>
                            </h:outputLabel>
                        </a4j:outputPanel>
                        <rich:messages styleClass="errormessages" />
                        <fieldset class="full">
                            <legend>#{msg.RoleDetails}</legend>
                            <div align="right"> <h:outputText value="(#{msg.Fieldsmarkedwitharemandatory})" styleClass="infomessages"/></div><br/>
                            <table width="100%" border="0" cellspacing="0" cellpadding="0" class="form-table" align="center">
                                <tr>
                                    <th width="23%">#{msg.Name}<sup><font color="red">*</font></sup></th>
                                    <td width="27%">
                                        <a4j:region>
                                            <h:inputText id="roleName" style="width:179px;" value="#{roleDataBean.roleName}" required="true" requiredMessage="Enter role name." maxlength="50">
                                                <rich:validator/>
                                            </h:inputText>
                                        </a4j:region>
                                    </td>
                                    <th width="23%"></th>
                                    <td width="27%"></td>
                                </tr>
                                <tr>
                                    <th>#{msg.Status}<sup><font color="red">*</font></sup></th>
                                    <td>
                                        <h:selectOneMenu id="status" style="width:180px" value="#{roleDataBean.status}">
                                            <f:selectItem itemValue="A" itemLabel="#{msg.Active}"/>
                                            <f:selectItem itemValue="IA" itemLabel="#{msg.InActive}"/>
                                        </h:selectOneMenu>
                                    </td>
                                    <th></th>
                                    <td></td>
                                </tr>
                                <tr>
                                    <th></th>
                                    <td colspan="3">
                                        <h:outputText value="#{msg.ChoosetheformsaccessibletothisRole}" style="color: grey"/><br/>
                                        <!--                                        <rich:pickList value="{roleServiceBean.featureIDs}" required="true" requiredMessage="Please select atleast one feature." listHeight="250px">
                                                                                                                            <f:selectItems value="#{roleServiceBean.sourceFeatureList}" />
                                                                                </rich:pickList>-->
                                        <h:selectManyMenu styleClass="featureMultiSelect" id="featureMultiSelect" value="#{roleDataBean.featureIdList}" required="true" requiredMessage="Please select atleast one feature." style="width: 500px;height: 250px">
                                            <f:selectItems value="#{roleServiceBean.sourceFeatureList}" />
                                            <f:converter converterId="userRoleConverter"/>
                                        </h:selectManyMenu>
                                    </td>
                                </tr>
                                <tr>
                                    <th colspan="4">&#160;</th>
                                </tr>
                            </table>
                        </fieldset>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" class="button-table">
                            <tr>
                                <td>&#160;</td>
                            </tr>
                            <tr>
                                <td>
                                    <h:commandButton value="#{msg.Create}" action="#{roleServiceBean.createRole()}" onclick="loadWaitPanel('content');" styleClass="button"/>&#160;&#160;
                                    <h:commandButton value="#{msg.Cancel}" action="searchRole" immediate="true" styleClass="button"/>
                                </td>
                            </tr>
                        </table>
                    </h:form>
                </div>
                <script type="text/javascript">
                   $("#featureMultiSelect").multiselect();
                </script>
            </ui:define>
        </ui:composition>
    </body>
</html>